<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>视频添加</title>
  <link rel="stylesheet" href="http://localhost:8080/layui/css/layui.css">
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">Little Drone</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
         <img src="http://t.cn/RCzsdCq" class="layui-nav-img">贤心
      </li>
      <li class="layui-nav-item"><a href="http://localhost:8080/drone/manage/layui/login3">退了</a></li>
    </ul>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree" lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">查看</a>
          <dl class="layui-nav-child">
            <dd><a href="/drone/manage/layui/newsCheckLay">新闻</a></dd>
            <dd><a href="/drone/manage/layui/videoCheckLay">视频</a></dd>
            <dd><a href="/drone/manage/layui/commCheckLay">评论</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">添加</a>
          <dl class="layui-nav-child">
            <dd><a href="/drone/manage/layui/newsInsert">新闻</a></dd>
            <dd><a href="/drone/manage/layui/videoInsert">视频</a></dd>
            <dd><a href="/drone/manage/layui/commInsert">评论</a></dd>
          </dl>
        </li>
      </ul>
    </div>
  </div>
  
  <div class="layui-body">
    <!-- 内容主体区域 -->
    <div style="padding: 15px;">
<blockquote class="layui-elem-quote layui-text">
  请在下面的页面中编辑你想要添加的视频。
</blockquote>
              
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
  <legend>视频表单</legend>
</fieldset>
 
<form class="layui-form" action="" lay-filter="example">
	<div class="layui-form-item">
    	<label class="layui-form-label">State</label>
    	<div class="layui-input-block">
      		<input type="text" name="state" id="state" lay-verify="state" autocomplete="off" placeholder="请输入状态，要求0-99的整数" class="layui-input">
    	</div>
	</div>
	<div class="layui-form-item">
    	<label class="layui-form-label">Title</label>
    	<div class="layui-input-block">
      		<input type="text" name="title" id="title" autocomplete="off" placeholder="请输入标题" class="layui-input">
    	</div>
	</div>
	<div class="layui-form-item">
    	<label class="layui-form-label">TitlePic</label>
    	<div class="layui-input-block">
      		<input type="text" name="titlePic" id="titlePic" autocomplete="off" placeholder="请输入标题图片路径" class="layui-input">
    	</div>
	</div>
	<div class="layui-form-item">
      <label class="layui-form-label">PubTime</label>
      <div class="layui-input-inline">
        <input type="text" name="pubTime" id="pubTime" class="layui-input" placeholder="发布时间：yyyy-MM-dd HH:mm:ss">
      </div>
    </div>
    <div class="layui-form-item">
    	<label class="layui-form-label">Author</label>
    	<div class="layui-input-block">
      		<input type="text" name="author" id="author" lay-verify="author" autocomplete="off" placeholder="请输入作者，要求1-10字符" class="layui-input">
    	</div>
	</div>
	<div class="layui-form-item">
    	<label class="layui-form-label">ReadCount</label>
    	<div class="layui-input-block">
      		<input type="text" name="readCount" id="readCount" autocomplete="off" placeholder="请输入阅读数" class="layui-input">
    	</div>
	</div>
	<div class="layui-form-item">
    	<label class="layui-form-label">VideoSrc</label>
    	<div class="layui-input-block">
      		<input type="text" name="videoSrc" id="videoSrc" autocomplete="off" placeholder="请输入视频路径" class="layui-input">
    	</div>
	</div>
	<div class="layui-form-item layui-form-text">
    	<label class="layui-form-label">Content</label>
    	<div class="layui-input-block">
      		<textarea name="content" id="content" placeholder="请输入内容" class="layui-textarea"></textarea>
    	</div>
	</div>
  	<div class="layui-form-item">
    	<div class="layui-input-block">
      		<button class="layui-btn" lay-submit="" lay-filter="exam">立即提交</button>
      		<button type="reset" class="layui-btn layui-btn-primary">重置</button>
    	</div>
  	</div>
</form>

	</div>
  </div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © layui.com - 底部固定区域
  </div>
</div>
<script src="http://localhost:8080/layui/layui.all.js"></script>
<script src="http://localhost:8080/scripts/js/frame.js"></script>
<script>
//JavaScript代码区域
!function(){
  var element = layui.element;
  var form = layui.form, layer = layui.layer, 
  layedit = layui.layedit, laydate = layui.laydate;
  
  //日期
  laydate.render({
    elem: '#test1' //指定元素
  });
  
  laydate.render({ 
  	elem: '#pubTime',
  	type: 'datetime'
  });
  
  form.verify({
    state: function(value){
    	if(value < 0 || value > 99){
    		return '状态有误，要求0-99的整数';
    	}
    },
    author: function(value){
    	if(value.length > 10){
    		return '作者有误，要求1-10字符';
    	}
    }
  });
  
  //监听提交
  form.on('submit(exam)', function(data){
    //layer.alert(JSON.stringify(data.field), {
    //  title: '最终的提交信息'
    //})
    insertVideo();
    return false;
  });
 
  //表单初始赋值
  form.val('example', {
    "state": "",
    "title": "",
    "titlePic": "",
    "pubTime": "",
    "author": "",
    "readCount": "",
    "content": "",
    "videoSrc": ""
  });
}();

function insertVideo() {
	var $ = layui.$;
    $.ajax({
        url: '/drone/manage/videoInsert', //请求的url
        type: 'post', //请求的方式
        contentType:"application/json;charset=utf-8",
        data: JSON.stringify(
    			{
    				id: null,
    				state: $('#state').val(),
    				title: $('#title').val(),
    				titlePic: $('#titlePic').val(),
    				pubTime: $('#pubTime').val(),
    				author: $('#author').val(),
    				readCount: $('#readCount').val(),
    				content: $('#content').val(),
    				videoSrc: $('#videoSrc').val()
    			}
    	),
        error:function (data) {
            alert('insert请求失败');
        },
        success:function (data) {
            alert('insert请求成功');
        }
    });
};
</script>
</body>
</html>